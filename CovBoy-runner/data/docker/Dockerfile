FROM archlinux

RUN pacman --noconfirm -Sy --needed gnupg archlinux-keyring
RUN pacman-key --init
RUN pacman-key --populate archlinux
RUN pacman --noconfirm -S jdk8-openjdk

ENV WORKD /ssd/sokolov/IdeaProjects/CovBoy
WORKDIR $WORKD

ENV SOLVER Z3
ENV IN_BENCH ./benchmark.smt2
ENV OUT_BENCH ./benchmark/Z3.cov
ENV SAMPLER PredicatesPropagatingSampler
ENV COMPLETEMODELS true
ENV SOLVERTIMEOUT 1000
ENV STATISTICS FALSE
ENV STATISTICS_FILE nofile

ENTRYPOINT if [ "$STATISTICS" == "TRUE" ]; then java -classpath /ssd/sokolov/IdeaProjects/CovBoy/CovBoy-runner/build/classes/kotlin/main:/ssd/sokolov/IdeaProjects/CovBoy/CovBoy-runner/build/resources/main:/ssd/sokolov/IdeaProjects/CovBoy/CovBoy-core/build/classes/kotlin/main:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-core/99636b9450/a2eb1c997ecffcbacdf3c4c0a2254983d450d7b8/ksmt-core-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-runner/99636b9450/5ac146c3b43abf4c3977719ed2a012c19601c937/ksmt-runner-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk8/1.7.20/eac6656981d9d7156e838467d2d8d79093b1570/kotlin-stdlib-jdk8-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-z3/99636b9450/7ac20e04c9faea05a7f1d3c4b3069b1dfb34cd0b/ksmt-z3-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.xenomachina/kotlin-argparser/2.0.7/421316b02a8a882dc2af32b7d57caa3c5ce30267/kotlin-argparser-2.0.7.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/1.7.32/cdcff33940d9f2de763bc41ea05a0be5941176c3/slf4j-api-1.7.32.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.jetbrains.rd/rd-framework/2022.3.2/60880b367ba828e72cd613315ac44f6b1591bea8/rd-framework-2022.3.2.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.jetbrains.rd/rd-core/2022.3.2/acd556d0d97b131a3fc6bdee3878644be409abe3/rd-core-2022.3.2.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-coroutines-core-jvm/1.6.4/2c997cd1c0ef33f3e751d3831929aeff1390cb30/kotlinx-coroutines-core-jvm-1.6.4.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk7/1.7.20/2a729aa8763306368e665e2b747abd1dfd29b9d5/kotlin-stdlib-jdk7-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.7.20/726594ea9ba2beb2ee113647fefa9a10f9fabe52/kotlin-stdlib-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.xenomachina/xenocom/0.0.7/45b60f19517d3085c9763b83c00f6778b2a8cec/xenocom-0.0.7.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-core/1.2.11/a01230df5ca5c34540cdaa3ad5efb012f1f1f792/logback-core-1.2.11.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-common/1.7.20/e15351bdaf9fa06f009be5da7a202e4184f00ae3/kotlin-stdlib-common-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-reflect/1.7.20/12b2501e33bb6373e8e347c86d85481863629381/kotlin-reflect-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-bitwuzla/99636b9450/9bee0906a61b9ff481a79e3f29b8ba901b4c71ae/ksmt-bitwuzla-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-cvc5/99636b9450/679075a4cc9e0fd37cd0e0a993c9eb5ce53443bb/ksmt-cvc5-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-yices/99636b9450/2318c02b4fbf3c3633eb9395282ce6088e3da8f8/ksmt-yices-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/it.unimi.dsi/fastutil-core/8.5.11/790ac854a8316bb4896662d02c53dd30d769ed53/fastutil-core-8.5.11.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-collections-immutable-jvm/0.3.5/2790401179de4445c880ad9efb3d4c068c7e5dd8/kotlinx-collections-immutable-jvm-0.3.5.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/commons-logging/commons-logging/1.2/4bfc12adfe4842bf07b657f0369c4cb522955686/commons-logging-1.2.jar:/home/sokolov/.local/share/JetBrains/Toolbox/apps/IDEA-U/ch-0/231.8109.175/lib/idea_rt.jar com.sokolov.covboy.sampler.main.SamplerMain --$SOLVER --in=$IN_BENCH --out=$OUT_BENCH --$SAMPLER --stm=$SOLVERTIMEOUT --cm=$COMPLETEMODELS --statistics --sf=$STATISTICS_FILE ; else java -classpath /ssd/sokolov/IdeaProjects/CovBoy/CovBoy-runner/build/classes/kotlin/main:/ssd/sokolov/IdeaProjects/CovBoy/CovBoy-runner/build/resources/main:/ssd/sokolov/IdeaProjects/CovBoy/CovBoy-core/build/classes/kotlin/main:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-core/99636b9450/a2eb1c997ecffcbacdf3c4c0a2254983d450d7b8/ksmt-core-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-runner/99636b9450/5ac146c3b43abf4c3977719ed2a012c19601c937/ksmt-runner-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk8/1.7.20/eac6656981d9d7156e838467d2d8d79093b1570/kotlin-stdlib-jdk8-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-z3/99636b9450/7ac20e04c9faea05a7f1d3c4b3069b1dfb34cd0b/ksmt-z3-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.xenomachina/kotlin-argparser/2.0.7/421316b02a8a882dc2af32b7d57caa3c5ce30267/kotlin-argparser-2.0.7.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-classic/1.2.11/4741689214e9d1e8408b206506cbe76d1c6a7d60/logback-classic-1.2.11.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.slf4j/slf4j-api/1.7.32/cdcff33940d9f2de763bc41ea05a0be5941176c3/slf4j-api-1.7.32.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.jetbrains.rd/rd-framework/2022.3.2/60880b367ba828e72cd613315ac44f6b1591bea8/rd-framework-2022.3.2.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.jetbrains.rd/rd-core/2022.3.2/acd556d0d97b131a3fc6bdee3878644be409abe3/rd-core-2022.3.2.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-coroutines-core-jvm/1.6.4/2c997cd1c0ef33f3e751d3831929aeff1390cb30/kotlinx-coroutines-core-jvm-1.6.4.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-jdk7/1.7.20/2a729aa8763306368e665e2b747abd1dfd29b9d5/kotlin-stdlib-jdk7-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib/1.7.20/726594ea9ba2beb2ee113647fefa9a10f9fabe52/kotlin-stdlib-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.xenomachina/xenocom/0.0.7/45b60f19517d3085c9763b83c00f6778b2a8cec/xenocom-0.0.7.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/ch.qos.logback/logback-core/1.2.11/a01230df5ca5c34540cdaa3ad5efb012f1f1f792/logback-core-1.2.11.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-stdlib-common/1.7.20/e15351bdaf9fa06f009be5da7a202e4184f00ae3/kotlin-stdlib-common-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains/annotations/13.0/919f0dfe192fb4e063e7dacadee7f8bb9a2672a9/annotations-13.0.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlin/kotlin-reflect/1.7.20/12b2501e33bb6373e8e347c86d85481863629381/kotlin-reflect-1.7.20.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-bitwuzla/99636b9450/9bee0906a61b9ff481a79e3f29b8ba901b4c71ae/ksmt-bitwuzla-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-cvc5/99636b9450/679075a4cc9e0fd37cd0e0a993c9eb5ce53443bb/ksmt-cvc5-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/com.github.UnitTestBot.ksmt/ksmt-yices/99636b9450/2318c02b4fbf3c3633eb9395282ce6088e3da8f8/ksmt-yices-99636b9450.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/it.unimi.dsi/fastutil-core/8.5.11/790ac854a8316bb4896662d02c53dd30d769ed53/fastutil-core-8.5.11.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/org.jetbrains.kotlinx/kotlinx-collections-immutable-jvm/0.3.5/2790401179de4445c880ad9efb3d4c068c7e5dd8/kotlinx-collections-immutable-jvm-0.3.5.jar:/home/sokolov/.gradle/caches/modules-2/files-2.1/commons-logging/commons-logging/1.2/4bfc12adfe4842bf07b657f0369c4cb522955686/commons-logging-1.2.jar:/home/sokolov/.local/share/JetBrains/Toolbox/apps/IDEA-U/ch-0/231.8109.175/lib/idea_rt.jar com.sokolov.covboy.sampler.main.SamplerMain --$SOLVER --in=$IN_BENCH --out=$OUT_BENCH --$SAMPLER --stm=$SOLVERTIMEOUT --cm=$COMPLETEMODELS ; fi
# docker build . -t sampler_main